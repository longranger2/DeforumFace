# è·¨å¹³å°æ‰“åŒ…è§£å†³æ–¹æ¡ˆ

## ğŸŒ æ”¯æŒå¤šå¹³å°çš„æ–¹æ³•

### æ–¹æ¡ˆ1ï¼šGitHub Actionsè‡ªåŠ¨æ‰“åŒ… (æ¨è)

åˆ›å»º `.github/workflows/build.yml`ï¼š

```yaml
name: Build Executables

on:
  push:
    tags:
      - 'v*'
  workflow_dispatch:

jobs:
  build:
    strategy:
      matrix:
        os: [windows-latest, macos-latest, ubuntu-latest]
        include:
          - os: windows-latest
            executable_name: HeadAlignmentTool.exe
            asset_name: HeadAlignmentTool-Windows.exe
          - os: macos-latest
            executable_name: HeadAlignmentTool
            asset_name: HeadAlignmentTool-macOS
          - os: ubuntu-latest
            executable_name: HeadAlignmentTool
            asset_name: HeadAlignmentTool-Linux

    runs-on: ${{ matrix.os }}

    steps:
    - uses: actions/checkout@v3

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'

    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
        pip install pyinstaller

    - name: Create hooks directory
      run: mkdir -p hooks

    - name: Create hook file
      run: |
        echo 'from PyInstaller.utils.hooks import copy_metadata, collect_data_files
        datas = copy_metadata("streamlit")
        datas += collect_data_files("streamlit")' > hooks/hook-streamlit.py

    - name: Build with PyInstaller (Windows)
      if: matrix.os == 'windows-latest'
      run: |
        pyinstaller --onefile --additional-hooks-dir=./hooks --name=HeadAlignmentTool run_streamlit.py --clean

    - name: Build with PyInstaller (macOS/Linux)
      if: matrix.os != 'windows-latest'
      run: |
        pyinstaller --onefile --additional-hooks-dir=./hooks --name=HeadAlignmentTool run_streamlit.py --clean

    - name: Upload artifact
      uses: actions/upload-artifact@v3
      with:
        name: ${{ matrix.asset_name }}
        path: dist/${{ matrix.executable_name }}
```

### æ–¹æ¡ˆ2ï¼šDockerå®¹å™¨æ‰“åŒ…

åˆ›å»º `Dockerfile.windows`ï¼š
```dockerfile
FROM python:3.9-windowsservercore

WORKDIR /app
COPY . .

RUN pip install -r requirements.txt
RUN pip install pyinstaller

RUN pyinstaller --onefile --additional-hooks-dir=./hooks run_streamlit.py
```

### æ–¹æ¡ˆ3ï¼šè™šæ‹Ÿæœºæ‰“åŒ…

1. **Windowsè™šæ‹Ÿæœº**ï¼š
   - ä½¿ç”¨VirtualBoxæˆ–VMware
   - å®‰è£…Windows 10/11
   - æŒ‰ç…§Windowsæ‰“åŒ…è¯´æ˜æ“ä½œ

2. **Linuxè™šæ‹Ÿæœº**ï¼š
   - ä½¿ç”¨Ubuntu 20.04 LTS
   - ç±»ä¼¼macOSçš„æ‰“åŒ…æµç¨‹

## ğŸ“‹ å¹³å°å…¼å®¹æ€§å¯¹æ¯”

| å¹³å° | å½“å‰çŠ¶æ€ | æ–‡ä»¶å | å¤§å° | ç‰¹æ®Šè¦æ±‚ |
|------|----------|--------|------|----------|
| macOS (ARM64) | âœ… å·²å®Œæˆ | HeadAlignmentTool | 186MB | Apple Silicon |
| macOS (Intel) | âŒ éœ€è¦é‡æ–°æ‰“åŒ… | HeadAlignmentTool-Intel | ~200MB | Intelå¤„ç†å™¨ |
| Windows 10/11 | âŒ éœ€è¦æ‰“åŒ… | HeadAlignmentTool.exe | ~250MB | 64ä½ç³»ç»Ÿ |
| Linux (Ubuntu) | âŒ éœ€è¦æ‰“åŒ… | HeadAlignmentTool-Linux | ~200MB | glibc 2.27+ |

## ğŸš€ å¿«é€Ÿè§£å†³æ–¹æ¡ˆ

### ç«‹å³å¯ç”¨çš„æ–¹æ¡ˆï¼š

1. **Webç‰ˆæœ¬éƒ¨ç½²** (æ¨è)ï¼š
   ```bash
   # éƒ¨ç½²åˆ°Streamlit Cloud
   # ç”¨æˆ·é€šè¿‡æµè§ˆå™¨è®¿é—®ï¼Œæ— éœ€ä¸‹è½½
   ```

2. **Dockerç‰ˆæœ¬**ï¼š
   ```bash
   # åˆ›å»ºDockeré•œåƒ
   docker build -t head-alignment-tool .
   docker run -p 8501:8501 head-alignment-tool
   ```

3. **Pythonè„šæœ¬åˆ†å‘**ï¼š
   ```bash
   # æä¾›å®‰è£…è„šæœ¬
   pip install -r requirements.txt
   streamlit run streamlit_app.py
   ```

## ğŸ’¡ å»ºè®®çš„åˆ†å‘ç­–ç•¥

### çŸ­æœŸæ–¹æ¡ˆ (1-2å¤©å†…)ï¼š
1. **Webç‰ˆæœ¬**ï¼šéƒ¨ç½²åˆ°Streamlit Cloudæˆ–Heroku
2. **è¯´æ˜æ–‡æ¡£**ï¼šæä¾›å„å¹³å°çš„Pythonç¯å¢ƒå®‰è£…æŒ‡å—

### ä¸­æœŸæ–¹æ¡ˆ (1å‘¨å†…)ï¼š
1. **Windowsæ‰“åŒ…**ï¼šåœ¨Windowsç³»ç»Ÿä¸Šæ‰‹åŠ¨æ‰“åŒ…
2. **GitHub Releases**ï¼šä¸Šä¼ å¤šå¹³å°å¯æ‰§è¡Œæ–‡ä»¶

### é•¿æœŸæ–¹æ¡ˆ (1ä¸ªæœˆå†…)ï¼š
1. **CI/CDè‡ªåŠ¨åŒ–**ï¼šGitHub Actionsè‡ªåŠ¨æ„å»º
2. **å®‰è£…ç¨‹åº**ï¼šåˆ›å»ºä¸“ä¸šçš„å®‰è£…åŒ…
3. **ä»£ç ç­¾å**ï¼šæé«˜è½¯ä»¶å¯ä¿¡åº¦

## ğŸ”§ å½“å‰å¯è¡Œçš„ä¸´æ—¶æ–¹æ¡ˆ

å¦‚æœä½ ç°åœ¨å°±éœ€è¦æ”¯æŒWindowsç”¨æˆ·ï¼Œæœ€å¿«çš„æ–¹æ³•æ˜¯ï¼š

1. **æä¾›Pythonå®‰è£…æŒ‡å—**ï¼š
   ```markdown
   ## Windowsç”¨æˆ·å®‰è£…æŒ‡å—
   1. å®‰è£…Python 3.9+
   2. ä¸‹è½½é¡¹ç›®ä»£ç 
   3. è¿è¡Œï¼špip install -r requirements.txt
   4. è¿è¡Œï¼šstreamlit run streamlit_app.py
   ```

2. **åˆ›å»ºæ‰¹å¤„ç†è„šæœ¬** `run_windows.bat`ï¼š
   ```batch
   @echo off
   echo æ­£åœ¨å¯åŠ¨å¤´éƒ¨å¯¹é½å·¥å…·...
   python -m streamlit run streamlit_app.py
   pause
   ```

è¿™æ ·Windowsç”¨æˆ·ä¹Ÿèƒ½ä½¿ç”¨ä½ çš„å·¥å…·ï¼Œåªæ˜¯éœ€è¦å…ˆå®‰è£…Pythonç¯å¢ƒã€‚ 