# 跨平台打包解决方案

## 🌍 支持多平台的方法

### 方案1：GitHub Actions自动打包 (推荐)

创建 `.github/workflows/build.yml`：

```yaml
name: Build Executables

on:
  push:
    tags:
      - 'v*'
  workflow_dispatch:

jobs:
  build:
    strategy:
      matrix:
        os: [windows-latest, macos-latest, ubuntu-latest]
        include:
          - os: windows-latest
            executable_name: HeadAlignmentTool.exe
            asset_name: HeadAlignmentTool-Windows.exe
          - os: macos-latest
            executable_name: HeadAlignmentTool
            asset_name: HeadAlignmentTool-macOS
          - os: ubuntu-latest
            executable_name: HeadAlignmentTool
            asset_name: HeadAlignmentTool-Linux

    runs-on: ${{ matrix.os }}

    steps:
    - uses: actions/checkout@v3

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'

    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
        pip install pyinstaller

    - name: Create hooks directory
      run: mkdir -p hooks

    - name: Create hook file
      run: |
        echo 'from PyInstaller.utils.hooks import copy_metadata, collect_data_files
        datas = copy_metadata("streamlit")
        datas += collect_data_files("streamlit")' > hooks/hook-streamlit.py

    - name: Build with PyInstaller (Windows)
      if: matrix.os == 'windows-latest'
      run: |
        pyinstaller --onefile --additional-hooks-dir=./hooks --name=HeadAlignmentTool run_streamlit.py --clean

    - name: Build with PyInstaller (macOS/Linux)
      if: matrix.os != 'windows-latest'
      run: |
        pyinstaller --onefile --additional-hooks-dir=./hooks --name=HeadAlignmentTool run_streamlit.py --clean

    - name: Upload artifact
      uses: actions/upload-artifact@v3
      with:
        name: ${{ matrix.asset_name }}
        path: dist/${{ matrix.executable_name }}
```

### 方案2：Docker容器打包

创建 `Dockerfile.windows`：
```dockerfile
FROM python:3.9-windowsservercore

WORKDIR /app
COPY . .

RUN pip install -r requirements.txt
RUN pip install pyinstaller

RUN pyinstaller --onefile --additional-hooks-dir=./hooks run_streamlit.py
```

### 方案3：虚拟机打包

1. **Windows虚拟机**：
   - 使用VirtualBox或VMware
   - 安装Windows 10/11
   - 按照Windows打包说明操作

2. **Linux虚拟机**：
   - 使用Ubuntu 20.04 LTS
   - 类似macOS的打包流程

## 📋 平台兼容性对比

| 平台 | 当前状态 | 文件名 | 大小 | 特殊要求 |
|------|----------|--------|------|----------|
| macOS (ARM64) | ✅ 已完成 | HeadAlignmentTool | 186MB | Apple Silicon |
| macOS (Intel) | ❌ 需要重新打包 | HeadAlignmentTool-Intel | ~200MB | Intel处理器 |
| Windows 10/11 | ❌ 需要打包 | HeadAlignmentTool.exe | ~250MB | 64位系统 |
| Linux (Ubuntu) | ❌ 需要打包 | HeadAlignmentTool-Linux | ~200MB | glibc 2.27+ |

## 🚀 快速解决方案

### 立即可用的方案：

1. **Web版本部署** (推荐)：
   ```bash
   # 部署到Streamlit Cloud
   # 用户通过浏览器访问，无需下载
   ```

2. **Docker版本**：
   ```bash
   # 创建Docker镜像
   docker build -t head-alignment-tool .
   docker run -p 8501:8501 head-alignment-tool
   ```

3. **Python脚本分发**：
   ```bash
   # 提供安装脚本
   pip install -r requirements.txt
   streamlit run streamlit_app.py
   ```

## 💡 建议的分发策略

### 短期方案 (1-2天内)：
1. **Web版本**：部署到Streamlit Cloud或Heroku
2. **说明文档**：提供各平台的Python环境安装指南

### 中期方案 (1周内)：
1. **Windows打包**：在Windows系统上手动打包
2. **GitHub Releases**：上传多平台可执行文件

### 长期方案 (1个月内)：
1. **CI/CD自动化**：GitHub Actions自动构建
2. **安装程序**：创建专业的安装包
3. **代码签名**：提高软件可信度

## 🔧 当前可行的临时方案

如果你现在就需要支持Windows用户，最快的方法是：

1. **提供Python安装指南**：
   ```markdown
   ## Windows用户安装指南
   1. 安装Python 3.9+
   2. 下载项目代码
   3. 运行：pip install -r requirements.txt
   4. 运行：streamlit run streamlit_app.py
   ```

2. **创建批处理脚本** `run_windows.bat`：
   ```batch
   @echo off
   echo 正在启动头部对齐工具...
   python -m streamlit run streamlit_app.py
   pause
   ```

这样Windows用户也能使用你的工具，只是需要先安装Python环境。 