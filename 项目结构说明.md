# 项目结构说明

## 📁 核心文件

### 应用核心
- `streamlit_app.py` - 主要的Streamlit应用文件，包含UI和业务逻辑
- `head_stabilizer.py` - 头部对齐算法的核心实现
- `requirements.txt` - Python依赖包列表

### 启动脚本
- `run.py` - 通用启动脚本，适用于开发环境
- `run_streamlit.py` - PyInstaller打包专用的启动脚本

## 📁 打包相关

### PyInstaller配置
- `HeadAlignmentTool.spec` - **重要**：PyInstaller配置文件，包含完整的打包设置
- `build_exe.py` - 简化的打包脚本
- `hooks/hook-streamlit.py` - Streamlit的PyInstaller hook文件

### 编译生成目录（已加入.gitignore）
- `build/` - PyInstaller编译临时文件
- `dist/` - 生成的可执行文件目录

## 📁 文档

### 使用说明
- `README.md` - 项目主要说明文档
- `使用说明.md` - 详细的用户使用指南

### 打包说明
- `Windows打包说明.md` - Windows平台打包指南
- `跨平台打包方案.md` - 多平台打包解决方案

## 📁 测试数据（已加入.gitignore）
- `me/` - 测试图片目录
- `messi/` - 测试图片目录  
- `瞬息宇宙/` - 测试图片目录
- `photos/` - 测试图片目录

## 📁 环境配置
- `deforumai/` - Python虚拟环境（已加入.gitignore）
- `packages.txt` - 系统包依赖（Streamlit Cloud用）
- `.gitignore` - Git忽略文件配置

## 🔧 重要文件说明

### `HeadAlignmentTool.spec`
这是最重要的打包配置文件，包含：
- Streamlit静态文件路径配置
- MediaPipe模型文件路径配置
- 所有必要的隐藏导入模块
- 平台特定的设置

**注意**：此文件包含硬编码的路径，在不同机器上打包时需要修改路径。

### `run_streamlit.py`
专为PyInstaller打包设计的启动脚本：
- 正确处理打包后的文件路径
- 设置合适的Streamlit参数
- 支持开发和打包两种环境

## 📋 文件优先级

### 必需文件（不可删除）
1. `streamlit_app.py` - 主应用
2. `head_stabilizer.py` - 核心算法
3. `requirements.txt` - 依赖列表
4. `HeadAlignmentTool.spec` - 打包配置
5. `run_streamlit.py` - 打包启动脚本
6. `hooks/hook-streamlit.py` - 打包hook

### 重要文件（建议保留）
1. `README.md` - 项目说明
2. `使用说明.md` - 用户指南
3. `run.py` - 开发启动脚本
4. `build_exe.py` - 打包脚本

### 可选文件（根据需要保留）
1. `Windows打包说明.md` - Windows用户需要
2. `跨平台打包方案.md` - 多平台开发需要
3. `packages.txt` - 云部署需要

## 🚀 快速开始

### 开发环境
```bash
# 激活虚拟环境
source deforumai/bin/activate

# 安装依赖
pip install -r requirements.txt

# 运行应用
python run.py
```

### 打包应用
```bash
# 激活虚拟环境
source deforumai/bin/activate

# 执行打包
python build_exe.py
```

### 使用打包后的应用
```bash
# macOS
./dist/HeadAlignmentTool

# Windows (需要先在Windows系统上打包)
dist\HeadAlignmentTool.exe
``` 